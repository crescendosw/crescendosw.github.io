(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var i=n(8),a=n.n(i),r=n(10),s=n.n(r),l=(n(18),n(19),n(1)),o=n(3),c=n(2),u=n(5),d=n(4),m=n(11),p=n.n(m),b=n(12),j=n(13),h=n(6);function v(e){var t=e,n=document.getElementById("tempo-slider");return Number(n.value)<.5?t=e*(1.5*Number(n.value)+.25):Number(n.value)>.5&&(t=e*(6*Number(n.value)-2)),t}function g(){var e=document.getElementById("time-slider");document.getElementById("time-output").innerHTML=e.value.toString()}var y=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var i;Object(l.a)(this,n),(i=t.call(this,e)).initialTempo=void 0,i.songLength=void 0,i.instrument=void 0,i.nodes={},i.ac=new j.a,i.midiPlayer=void 0,i.state={playing:!1,initialTempo:0,songLength:0},i._play=i._play.bind(Object(c.a)(i));var a=i._handleEvent.bind(Object(c.a)(i));return i.midiPlayer=new b.a.Player(a),i}return Object(o.a)(n,[{key:"_handleEvent",value:function(e){var t=100;if("Note on"===e.name){var n;switch(e.channel){case 1:t=e.velocity*(function(){var e=document.getElementById("soprano-slider").value;return Number(e)}()/10);break;case 2:t=e.velocity*(function(){var e=document.getElementById("alto-slider").value;return Number(e)}()/10);break;case 3:t=e.velocity*(function(){var e=document.getElementById("tenor-slider").value;return Number(e)}()/10);break;case 4:t=e.velocity*(function(){var e=document.getElementById("bass-slider").value;return Number(e)}()/10)}var i=null===(n=this.instrument)||void 0===n?void 0:n.play(e.noteName,this.ac.currentTime,{gain:t});this.nodes[e.channel]&&this.nodes[e.channel].stop(),this.nodes[e.channel]=i}else"Note off"===e.name&&this.nodes[e.channel]&&(this.nodes[e.channel].stop(),delete this.nodes[e.channel])}},{key:"_play",value:function(){if(this.state.playing)return this.midiPlayer.pause(),void this.setState({playing:!1});this.setState({playing:!0});var e=window.navigator.userAgent.includes("Mobile")?"acoustic_grand_piano-mp3.js":"acoustic_grand_piano-ogg.js",t=this._instrumentLoaded.bind(this);p.a.instrument(this.ac,e).then(t)}},{key:"_instrumentLoaded",value:function(e){var t=this;this.instrument=e;fetch("447_and_can_it_be.mid").then((function(e){return e.arrayBuffer()})).then((function(e){return function(e){t.midiPlayer.loadArrayBuffer(e),t.setState({initialTempo:t.midiPlayer.getTempo()}),t.setState({songLength:t.midiPlayer.getSongTime()}),t.midiPlayer.play()}(e)}))}},{key:"render",value:function(){var e=this;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("form",{id:"slider-form",children:[Object(h.jsx)("label",{children:"Soprano:"}),Object(h.jsx)("input",{type:"range",id:"soprano-slider",className:"sliders",defaultValue:1,min:0,max:2,step:.01}),Object(h.jsx)("br",{}),Object(h.jsx)("label",{children:"Alto:"}),Object(h.jsx)("input",{type:"range",id:"alto-slider",className:"sliders",defaultValue:1,min:0,max:2,step:.01}),Object(h.jsx)("br",{}),Object(h.jsx)("label",{children:"Tenor:"}),Object(h.jsx)("input",{type:"range",id:"tenor-slider",className:"sliders",defaultValue:1,min:0,max:2,step:.01}),Object(h.jsx)("br",{}),Object(h.jsx)("label",{children:"Bass:"}),Object(h.jsx)("input",{type:"range",id:"bass-slider",className:"sliders",defaultValue:1,min:0,max:2,step:.01}),Object(h.jsx)("br",{}),Object(h.jsx)("label",{children:"Tempo:"}),Object(h.jsx)("input",{type:"range",id:"tempo-slider",defaultValue:.5,min:0,max:1,step:.01,onInput:function(){return t=e.state.initialTempo,void(document.getElementById("tempo-output").innerHTML=Math.round(v(t)).toString());var t},onMouseUp:function(){return t=e.midiPlayer,n=e.state.initialTempo,void t.setTempo(v(n));var t,n}}),Object(h.jsx)("br",{})]}),Object(h.jsx)("label",{children:"Tempo: "}),Object(h.jsx)("output",{id:"tempo-output",children:this.state.initialTempo}),Object(h.jsx)("label",{children:"Time: "}),Object(h.jsx)("output",{id:"time-output",children:"0"}),Object(h.jsx)("label",{children:"test"}),Object(h.jsxs)("div",{id:"bottom-div",children:[Object(h.jsx)("input",{type:"range",id:"time-slider",onInput:g,onMouseUp:function(){return function(e){var t=document.getElementById("time-slider");e.skipToPercent(Number(t.value)/e.getSongTime())}(e.midiPlayer)},defaultValue:0,min:0,max:this.state.songLength,step:.01}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{id:"play-button",onClick:this._play,children:this.state.playing?"pause":"play"})]})]})}}]),n}(a.a.Component);var f=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)("header",{className:"App-header",children:Object(h.jsx)(y,{})})})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,50)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),i(e),a(e),r(e),s(e)}))};s.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(f,{})}),document.getElementById("root")),x()}},[[49,1,2]]]);
//# sourceMappingURL=main.1ce09a65.chunk.js.map